{% extends "base.html" %}

{% block content %}
    {% if is_logged_in %}
        <div class="card">
            <h1 style="margin-top: 0;">{{ t('Bienvenue') }}</h1>
            <p>{{ t('Connecté en tant que') }} <strong>{{ user_id }}</strong>.</p>
            <p><a href="{{ url_for('dashboard', user=viewing_user_id) }}">{{ t('Aller au dashboard') }}</a></p>
        </div>
    {% else %}
        <div class="auth-grid">
            <div class="card">
                <h1 style="margin-top: 0;">{{ t('Connexion') }}</h1>
                <p class="muted">{{ t('Email Garmin + PIN (app).') }}</p>

                <form method="post" action="{{ url_for('login') }}">
                    <div class="field">
                        <label for="login-email">{{ t('Email') }}</label>
                        <input id="login-email" name="email" type="email" required />
                    </div>

                    <div class="field">
                        <label for="login-pin">{{ t('PIN') }}</label>
                        <input id="login-pin" name="pin" type="password" inputmode="numeric" autocomplete="one-time-code" required />
                    </div>

                    <button class="btn" type="submit">{{ t('Se connecter') }}</button>
                </form>
            </div>

            <div class="card">
                <h1 style="margin-top: 0;">{{ t('Inscription') }}</h1>
                <p class="muted">{{ t('Ton compte app utilise le même email que Garmin.') }}</p>

                <form method="post" action="{{ url_for('register') }}">
                    <div class="field">
                        <label for="register-pseudo">{{ t('Pseudo') }}</label>
                        <input id="register-pseudo" name="pseudo" type="text" maxlength="80" required />
                    </div>

                    <div class="field">
                        <label for="register-email">{{ t('Email') }}</label>
                        <input id="register-email" name="email" type="email" required />
                    </div>

                    <div class="field">
                        <label for="register-pin">{{ t('PIN') }}</label>
                        <input id="register-pin" name="pin" type="password" inputmode="numeric" autocomplete="new-password" required />
                    </div>

                    <button class="btn btn--pink" type="submit">{{ t("S'inscrire") }}</button>
                </form>
            </div>
        </div>
    {% endif %}
{% endblock %}
